<!-- <p id="notice"><%= notice %></p> -->

<section class="studNet-wrapper">
  <div class="container">

    <div class="row">
      <div class="col-md-12">

        <h1>
          Posibles Ofertas
        </h1>

        <table class="table table-striped">
          <thead>
          <tr>
            <th>
              Empresa oferente
            </th>
            <th>
              Nombre de la oferta
            </th>
            <th>
              Fecha de publicación
            </th>
            <th>
              Duración
            </th>
            <th>
              Tiempo requerido
            </th>
            <th>
              Salario / Valor
            </th>
            <th colspan="5">Acciones</th>
          </tr>
          </thead>

          <tbody>
          <% @opportunities.each do |opportunity| %>
              <tr>
                <td>
                  <%= opportunity.user.company.company_name  %>
                </td>
                <td>
                  <%= opportunity.opportunity_title %>
                </td>
                <td>
                  <%= opportunity.created_at.strftime('%d/%m/%Y') %>
                </td>
                <td>
                  <%= opportunity.opportunity_duration %>
                </td>
                <td>
                  <%= opportunity_availability_friendly(opportunity) %>
                </td>
                <td>
                  <%# TODO: Make conditional to show opportunity_cost if there is one, if company selected 'student can make an offer' then show 'Permite ofertar'  %>
                  <% if opportunity.opportunity_cost.nil? %>
                      <%= 'Se permite ofertar' %>
                  <% else %>
                      <%= opportunity.opportunity_cost %>
                  <% end %>
                </td>

                <!-- TODO: Opportunities/index - cancan | Student can only view offers that match their Major(s) or that are open for all Majors -->
                <td><%= link_to 'Detalles', opportunity_path(opportunity) %></td>
                <!-- TODO: Opportunities/indexs - make 'Aplicar' work -->
                <td><%#= link_to 'Aplicar', apply_opportunity_path(opportunity) %></td>

                <% if @user_role.role_id == 0 %>
                    <!-- TODO: Opportunities/index - create 'APROBAR' action for ADMIN to approve opportunities -->
                    <!-- TODO: Opportunities/index - cancan | only admin can approve offer -->
                    <td><%= link_to 'Aprobar', '#' %></td>
                    <!-- TODO: Opportunities/index - cancan | only admin can destroy -->
                    <td><%= link_to 'Borrar', opportunity, method: :delete, data: { confirm: '¿Estás seguro?' } %></td>
                <% end %>

              </tr>
          <% end %>
          </tbody>
        </table>

      </div>
    </div>

    <!-- Companiy/Person Actions -->
    <% if @user_role.role_id == 3 || @user_role.role_id == 4 %>
        <div class="row">
          <div class="col-md-12 text-center">
            <% #TODO: Opportunities/show - cancan | only Company/Person can create a new opportunity %>
            <%= link_to 'Crear oferta', new_opportunity_path, class: 'btn btn-primary btn-studnet' %>
          </div>
        </div>
        <% elsif @user_role.role_id == 2 %>
        <div class="row">
          <div class="col-md-12 text-center">
            <% #TODO: Opportunities/show - cancan | only Company/Person can create a new opportunity %>
            <%= link_to 'Ver mis ofertas', my_opportunities_opportunities_path, class: 'btn btn-primary btn-studnet' %>
          </div>
        </div>
    <% end %>
    <!-- ./Companiy/Person Actions -->

  </div>
</section>